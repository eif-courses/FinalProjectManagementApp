{{template "base.html" .}}

{{define "content"}}
<div class="mb-6">
  <h1 class="text-2xl font-bold text-gray-800">{{call .T "dashboard"}}</h1>
  <p class="text-gray-600">{{call .T "welcome"}}, {{.User.Name}}!</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
  <!-- Student Dashboard -->
  {{if eq .User.Role "student"}}
  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "my_topics"}}</h2>
    <p class="text-gray-600 mb-4">{{call .T "manage_thesis_topics"}}</p>
    <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
      {{call .T "submit_new_topic"}}
    </button>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "my_documents"}}</h2>
    <p class="text-gray-600">{{call .T "upload_documents"}}</p>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "status"}}</h2>
    <p class="text-gray-600">{{call .T "track_progress"}}</p>
  </div>
  {{end}}

  <!-- Department Head Dashboard -->
  {{if eq .User.Role "department_head"}}
  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "pending_approvals"}}</h2>
    <p class="text-gray-600">{{call .T "review_submissions"}}</p>
    <a href="/students" class="mt-4 inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
      {{call .T "view"}} {{call .T "students"}}
    </a>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "department_students"}}</h2>
    <p class="text-gray-600">{{call .T "manage_department_students" .User.Department}}</p>
    <div class="mt-4">
      <div class="text-2xl font-bold text-blue-600">23</div>
      <div class="text-sm text-gray-500">{{call .T "students"}}</div>
    </div>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "reports"}}</h2>
    <p class="text-gray-600">{{call .T "generate_reports"}}</p>
    <div class="mt-4 space-y-2">
      <button class="w-full text-left bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded text-sm">
        ðŸ“Š {{call .T "monthly_report"}}
      </button>
      <button class="w-full text-left bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded text-sm">
        ðŸ“ˆ {{call .T "progress_report"}}
      </button>
    </div>
  </div>
  {{end}}

  <!-- Supervisor Dashboard -->
  {{if eq .User.Role "supervisor"}}
  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "my_students"}}</h2>
    <p class="text-gray-600">{{call .T "supervise_students"}}</p>
    <div class="mt-4">
      <div class="text-2xl font-bold text-green-600">8</div>
      <div class="text-sm text-gray-500">{{call .T "active_students"}}</div>
    </div>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "pending_reviews"}}</h2>
    <p class="text-gray-600">{{call .T "review_submissions"}}</p>
    <div class="mt-4">
      <div class="text-2xl font-bold text-orange-600">3</div>
      <div class="text-sm text-gray-500">{{call .T "awaiting_review"}}</div>
    </div>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">{{call .T "completed_reviews"}}</h2>
    <p class="text-gray-600">{{call .T "track_progress"}}</p>
    <div class="mt-4">
      <div class="text-2xl font-bold text-blue-600">15</div>
      <div class="text-sm text-gray-500">{{call .T "this_semester"}}</div>
    </div>
  </div>
  {{end}}

  <!-- Default/Other roles -->
  {{if and (ne .User.Role "student") (ne .User.Role "department_head") (ne .User.Role "supervisor")}}
  <div class="bg-white p-6 rounded-lg shadow col-span-full">
    <h2 class="text-lg font-bold mb-4">{{call .T "welcome"}}</h2>
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <p class="text-gray-600"><strong>{{call .T "role"}}:</strong> {{.User.Role}}</p>
        <p class="text-gray-600"><strong>{{call .T "department"}}:</strong> {{.User.Department}}</p>
        <p class="text-gray-600"><strong>{{call .T "email"}}:</strong> {{.User.Email}}</p>
      </div>
      <div class="space-y-2">
        <button class="w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
          {{call .T "view"}} {{call .T "students"}}
        </button>
        <button class="w-full bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
          {{call .T "settings"}}
        </button>
      </div>
    </div>
  </div>
  {{end}}
</div>

<!-- Quick Stats -->
<div class="mt-8 bg-white rounded-lg shadow-sm p-6">
  <h3 class="text-lg font-bold mb-4">{{call .T "quick_stats"}}</h3>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <div class="text-center">
      <div class="text-2xl font-bold text-blue-600">47</div>
      <div class="text-sm text-gray-500">{{call .T "total_students"}}</div>
    </div>
    <div class="text-center">
      <div class="text-2xl font-bold text-green-600">23</div>
      <div class="text-sm text-gray-500">{{call .T "approved_topics"}}</div>
    </div>
    <div class="text-center">
      <div class="text-2xl font-bold text-orange-600">12</div>
      <div class="text-sm text-gray-500">{{call .T "pending_reviews"}}</div>
    </div>
    <div class="text-center">
      <div class="text-2xl font-bold text-purple-600">8</div>
      <div class="text-sm text-gray-500">{{call .T "completed_thesis"}}</div>
    </div>
  </div>
</div>
{{end}}