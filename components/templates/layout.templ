package templates

import "FinalProjectManagementApp/auth"

templ Layout(user *auth.AuthenticatedUser, currentLocale string, title string) {
    <!DOCTYPE html>
    <html lang={ currentLocale }>
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>{ title } - BaigiamÅ³jÅ³ darbÅ³ talpykla</title>
        <link rel="stylesheet" href="/assets/css/output.css"/>
    </head>
    <body class="bg-background text-foreground min-h-screen">
        @Navbar(user, currentLocale)
        <main class="container mx-auto px-4 py-6">
            { children... }
        </main>

        <!-- Add HTMX -->
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <script src="/static/js/navbar.js"></script>
    </body>
    </html>
}

templ LayoutWithSidebar(user *auth.AuthenticatedUser, currentLocale string, title string, showSidebar bool) {
    <!DOCTYPE html>
    <html lang={ currentLocale }>
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>{ title } - BaigiamÅ³jÅ³ darbÅ³ talpykla</title>
        <link rel="stylesheet" href="/assets/css/output.css"/>
    </head>
    <body class="bg-background text-foreground">
        <div class="min-h-screen flex flex-col">
            @Navbar(user, currentLocale)

            if showSidebar && user != nil {
                <div class="flex flex-1">
                    @Sidebar(user)
                    <main class="flex-1 p-6">
                        { children... }
                    </main>
                </div>
            } else {
                <main class="flex-1 container mx-auto px-4 py-6">
                    { children... }
                </main>
            }
        </div>

        <!-- Add HTMX -->
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <script src="/static/js/navbar.js"></script>
    </body>
    </html>
}

templ Sidebar(user *auth.AuthenticatedUser) {
    <aside class="w-64 border-r bg-card text-card-foreground">
        <div class="p-6">
            <h2 class="text-lg font-semibold mb-4">Navigation</h2>
            <nav class="space-y-2">
                @SidebarLink("/dashboard", "Dashboard", "ğŸ ")
                @SidebarLink("/projects", "Projects", "ğŸ“")
                @SidebarLink("/submissions", "Submissions", "ğŸ“„")
                @SidebarLink("/settings", "Settings", "âš™ï¸")
            </nav>
        </div>
    </aside>
}

templ SidebarLink(href string, text string, icon string) {
    <a href={ templ.SafeURL(href) }
        class="flex items-center space-x-3 text-sm font-medium rounded-md px-3 py-2 hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <span class="text-lg">{ icon }</span>
        <span>{ text }</span>
    </a>
}